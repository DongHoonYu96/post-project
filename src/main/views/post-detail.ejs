<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>게시글 상세</title>
    <link rel="stylesheet" href="../css/post-detail.css">
</head>
<body>
<nav class="navbar">
    <a href="/">HELLO. WEB!</a>
    <ul class="nav-item-box">
        <li><button onclick="location.href='/user/list'" class="button">멤버리스트</button></li>
        <li><button onclick="location.href='/user/mypage'" class="button">마이페이지</button></li>
        <li><button onclick="location.href='/user/logout'" class="button">로그아웃</button></li>
    </ul>
</nav>

<div class="post-container">
    <h1 class="post-title"><%=post.title%></h1>

    <div class="post-info">
        <span class="author">작성자: <%= post.member.nickname %></span>
        <span class="date">작성일: <%=post.createdAt.toLocaleString()%></span>
        <span class="views">조회수: <%=post.views%></span>
    </div>

    <div class="post-content">
        <%=post.content%>
    </div>

    <% if (post.image) { %>
        <img src="<%= imagePath.imagePath %>" alt="Post Image" class="post-image">
    <% } %>

    <div class="comment-count">
        댓글 수: <%=post.comments.length%>
    </div>

    <div class="comments-container">
        <h2>댓글</h2>
        <% post.comments.forEach(function(comment) { %>
            <div class="comment">
                <div class="comment-info">
                    <span class="comment-author"><%=comment.member.nickname%></span>
                    <span class="comment-date"><%=comment.createdAt.toLocaleString()%></span>
                </div>
                <div class="comment-content">
                    <%=comment.content%>
                </div>
            </div>
        <% }); %>
    </div>

    <div class="comment-form-container">
        <form action="/comment/save" method="POST" class="new-comment-form">
            <div class="user-info">
                <%= member.nickname %>
            </div>
            <textarea name="content" placeholder="댓글을 입력하세요" required></textarea>
            <input type="hidden" name="postId" value="<%= post.id %>">
            <input type="hidden" name="memberId" value="<%= post.member.id %>">
            <div class="button-container">
                <button type="submit">댓글 작성</button>
            </div>
        </form>
    </div>

    <div class="post-navigation">
        <div class="nav-buttons">
            <a href="/post/3" class="nav-button">이전글 : 미완성</a>
            <a href="/post/4" class="nav-button">다음글 : 미완성</a>
        </div>
        <div class="list-button">
            <a href="/index" class="nav-button">목록으로</a>
        </div>
    </div>
</div>

</body>
</html>